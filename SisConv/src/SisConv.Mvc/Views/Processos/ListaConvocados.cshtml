@model SisConv.Application.ViewModels.ConvocacaoViewModel
@{
	ViewBag.Title = "Lista de Candidatos";
}
<script src="~/Scripts/jquery-3.2.1.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>
@*<script src="~/Scripts/Convocacao/Convocacao.js"></script>*@
<script>
    $(document).ready(function ($) {

        $("#HorarioEntregaDocumento").mask('00:00');


        $("#DataEntregaDocumentos").datepicker({
            dateFormat: 'dd/mm/yy',
            dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
            dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
            dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
            monthNames: [
                'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro',
                'Dezembro'
            ],
            monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
            nextText: 'Próximo',
            prevText: 'Anterior'
        });

        $("#envia_selecionados").click(function () {
            var convocados = new Array;
       
            $("input[name=Convocado]").each(function () {

                if (this.checked === true) {
                
                    convocados.push($(this).val());
                }
                $("#CandidatosSelecionados").val(convocados);
            });
        });
    });
</script>

<h2>@ViewBag.DadosConvocacao.Nome</h2>
<h3>
	@ViewBag.DadosCargo.Nome
</h3>
    <table class="table">
        <tr>
            <th>
                Inscrição
            </th>
            <th>
                Nome
            </th>
            <th>
                CPF
            </th>
            <th>
                Pontuação
            </th>
            <th>
                Posição
            </th>
            <th>
                Resultado
            </th>
            <th>Convocar?</th>
        </tr>

        @foreach (var item in ViewBag.ListaCandidatos) {
            <tr>
                <td>
                    @item.Inscricao
                </td>
                <td>
                    @item.Nome.ToString().ToUpper()
                </td>
                <td>
                    @item.Cpf
                </td>
                <td>
                    @item.Pontuacao
                </td>
                <td>
                    @item.Posicao
                </td>
                <td>
                    @item.Resultado.ToString().ToUpper()
                </td>
                <td>@Html.CheckBox("Convocado",new{Value=item.ConvocadoId})</td>
            </tr>
        }
        <tr>
            <td colspan="7" align="center">
               
                <button type="button" class="btn btn-primary" id="envia_selecionados" data-toggle="modal" data-target="#myModal">Enviar Candidatos Selecionados</button>
                <input type="button" value="Voltar" />

            </td>
        </tr>

    </table>
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
            @using (Html.BeginForm("Create", "Convocacao", FormMethod.Post, new { form = "form" }))
            {
                @Html.AntiForgeryToken()
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Convocação</h4>
                    </div>
                    <div class="modal-body">
                        <br />
                        <span id="disc"></span>
                        @Html.Hidden("CandidatosSelecionados")
                        <h5 class="modal-title">Preencha os dados abaixo para seguir com a convocação:</h5>
                        <br />
                        <form class="form-horizontal">
                            <fieldset>
                                
                                <div class="form-group">
                                    <label for="DataEntregaDocumentos" class="col-lg-10 control-label"><b>Data da entrega dos documentos.</b></label>
                                    <div class="col-lg-10">
                                        @Html.TextBoxFor(model=>model.DataEntregaDocumentos)<br/><br />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="HorarioEntregaDocumento" class="col-lg-10 control-label"><b>Horário de entrega dos documentos.</b></label>
                                    <div class="col-lg-10">
                                        @Html.TextBoxFor(model => model.HorarioEntregaDocumento)<br /><br />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="EnderecoEntregaDocumento" class="col-lg-10 control-label"><b>Endereço de Entrega dos documentos.</b> </label>
                                    <div class="col-lg-10">
                                        @Html.TextBoxFor(model => model.EnderecoEntregaDocumento, new{@maxlength=150})<br /><br />
                                    </div>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="Submit" class="btn btn-primary">Salvar</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    </div>
                </div>
                
            }
        </div>
    </div>


